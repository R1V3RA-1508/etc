Шаг 1      Подключение к Интернету

Так как ArchLinux зависим от интернета начнем с него:

   – если подключение по проводу Ethernet то интернет должен быть
   – если wi-fi, то подключаемся через iwctl следующим образом:

```
   # Входим в режим подключения
   iwctl
   # Смотрим какие wifi устройства имеются
   station list
   # Просматриваем эфир wifi сетей
   station адаптер get-networks
   # Производим подключение к сети
   station адаптер connect “SSID_сети”
```


     Если возникла какая-либо проблема, попробуйте выполнить следующую
команду и снова попробуйте подключиться к Wi-Fi:

```
   rfkill unblock all
```

                                                                     
Шаг 2      Настройка пакетного менеджера

      (Не обязательно) В некоторых случаях пакетный менеджер сам не
определяет зеркала с которыми работать, поэтому их можно настроить вручную
просто закоментировав зеркало лишние зеркала в файле /etc/pacman.d/mirrorlist:

```
   nano /etc/pacman.d/mirrorlist
```


Для более гибкой настройки редактируется файл /etc/pacman.conf

```
   nano /etc/pacman.conf
```


        В данном файле раскоментируем строки для разблокировки репозитория
multilib и позволит скачивать одновременно 5 пакетов для ускорения скорости
скачивания дистрибутива.

/etc/pacman.conf:

   ParallelDownloads = 5

   [multilib]
   Include = /etc/pacman.d/mirrorlist




Шаг 3        Разметка диска

В зависимости от вида используемого BIOS есть 2 способа разметки диска:

   – gpt – наиболее часто используемая на современных компьютерах
   – dos –используется на старых компьютерах или стоит стандартно в VirtualBox
если не указана загрузка по efi

Ищем нужные диски:
```
   lsblk
```
                                                                             
      Форматируем требуемый диск в псевдографическом интерфейсе с помощью
утилиты cfdisk. Если диск не размечен то предложит сначала создать метку диска,
выбирайте под свой тип загрузки, иначе загрузчик не поставится:

```
   cfdisk нужный_диск
```


Создайте разделы следующие разделы:

  #    Тип                 Размер          Точка монтирования
  1)   EFI system         256M             /boot/efi (не требуется при dos метке)
  2)   Linux filesystem   ~ 30-40 ГБ       /
  3)   Linux filesystem   Все остальное    /home
                                     *раздел 3 (home) требуется если вы его хотите вынести




Шаг 4          Форматирование разделов

Смотрим созданные нами разделы:

```
   lsblk
```

Форматируем следующим образом

```
   # форматирование раздела EFI
   mkfs.vfat /dev/диск1
   # Форматирование корня /
       mkfs.ext4 /dev/диск2
   # если /home выносили в отдельный раздел:
   mkfs.ext4 /dev/диск3
```



                                                                                         
Шаг 5      Монтирование разделов

Монтируем разделы следующим образом

```
     mount /dev/диск2 /mnt

     mkdir -p /mnt/boot/efi

     mount /dev/диск1 /mnt/boot/efi
```


Eсли /home выносили в отдельный раздел:

```
     mkdir -p /mnt/home

     mount /dev/диск3 /mnt/home
```


Шаг 6          Установка пакетов

Список пакетов:

 base base-devel linux linux-firmware linux-headers nano   Необходимый
         vim bash-completion grub efibootmgr               минимум


                                                           Для раброты
                    networkmanager                         сетевых служб
                                                           Дисплейный
                           xorg
                                                           сервер Xorg

               ttf-ubuntu-font-family ttf-hack
                                                           Шрифты
          ttf-dejavu ttf-opensans terminus-font

                                                           Дисплейный
               sddm / lightdm / lxdm / gdm                 менеджер
                                                           (выберите ОДИН)


                                                           Окружение
              gnome / plasma / cinnamon /
                                                           рабочего стола
               budgie / xfce4 / lxqt / lxde /
                                                           (выберите ОДНО)

                                                           Проприетарный
                          nvidia
                                                           драйвер NVIDIA


                                                                             
  mesa lib32-mesa vulkan-radeon lib32-vulkan-radeon
              libva-mesa-driver libva-utils                Драйвер графики amd

  mesa lib32-mesa vulkan-intel intel-media-driver libva-
                intel-driver libva-utils                   Драйвер графики intel



Пример команды:

```
    pacstrap       /mnt    base     base-devel       linux   linux-firmware        linux-
headers nano vim bash-completion grub efibootmgr xorg ttf-ubuntu-
font-family ttf-hack ttf-dejavu ttf-opensans lxdm xfce4
```



Шаг 7       Генерация fstab

      Файл /etc/fstab регулирует какие разделы куда будут примонтированы при
загрузке нашей ОС

```
    genfstab /mnt >> /mnt/etc/fstab
```



Шаг 8      Установка загрузчика

Меняем корень для выполнения действий в новой ОС:
```
    arch-chroot /mnt
```


      Устанавливаем загрузчик. Главное указать сам диск а не раздел (без цифр
на конце):
```
    grub-install /dev/диск # если надо --target=i686
```

                                                                                        
       Формируем конфигурационный файл граб:
```
    grub-mkconfig -o /boot/grub/grub.cfg
```



Шаг 8      Настройка новой системы

       На данный момент наша система установлена, но настроить операционную
систему для работы с ней. Включаем сервисы для автозапуска:
bash
    systemctl enable NetworkManager

    # в зависимости от выбора sddm / lxdm / gdm / ... включаем DM

    systemctl enable название_DM



      Создаем пользователя и ставим пароли (на каждом пользователе
обязательно должен стоять пароль):
Создаем пользователя
```
    useradd -m имя_пользователя
```


       Устанавливаем пароль пользователю
       *Внимание, при вводе пароля в строку пароля его не видно!!!

```
    passwd имя_пользователя
```


Устанавливаем пароль пользователю root

```
    passwd
```


      Для того чтобы иметь право на исполнение команд от имени
суперпользователя требуется вписать себя в файл /etc/sudoers. Для редактирования рекомендуется использовать утилиту visudo, не если не умеете
работать в vi то можно редактировать напрямую.
```
    nano /etc/sudoers
```


Добавляем следующую строку после строки «root ALL=(ALL:ALL) ALL»:
/etc/sudoers:

    ваш_пользователь ALL=(ALL:ALL) ALL



Устанавливаем часовой пояс относительный путь из /usr/share/zoneinfo
```
    sudo timedatectl set-timezone часовой_пояс
```

# Пример часового пояса Europe/Moscow
Включаем NTP (время по сети)
```
    sudo timedatectl set-ntp true
```


      Для установки локалей системы требуется раскоментировать нужные строки
с языками :
```
    nano /etc/locale.gen
```


/etc/locale.gen:
       en_US.UTF-8 UTF-8
       ru_RU.UTF-8 UTF-8


        Для установки языка системы вписываем строку c локалью языка в файл
/etc/locale.conf:
```
    echo ‘ “LANG=”en_US.UTF-8” ‘ > /etc/locale.conf
```
                                                                           
Если была установлена иная раскладка отличающееся от английской, то
требуется сменить шрифт терминала, для того что бы символы кирилицы не
отображались как белые квадраты, для этого надо вписать в файл
/etc/vconsole.conf строки:

/etc/vconsole.conf:
     KEYMAP=ru

     FONT=cyr-sun16




       На этом базовая настройка окончена и можно перезагружать компьютер

```
     exit

     reboot
```



Шаг 8       Создание SWAP файла


     (Необязательно) SWAP файл работает как файл подкачки в windows и
используется для расширения оперативной памяти за счет постоянной памяти

       Создание swap-файла

```
     sudo mkswap -U clear --size размер --file /swapfile

     sudo swapon /swapfile

     sudo echo “/swapfile none    swap   defaults 0 0” >> /etc/fstab
```



                                                                            